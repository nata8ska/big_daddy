# Сценарий Подтверждение заказа

***Цель***: проверить и оплатить заказ.

***Акторы***: пользователь, сайт, банк, 1С, сервис генерации QR кодов (далее **СГ**).

## Основной сценарий (оплата картой)
1. Пользователь нажимает “Оформить заказ”.

2. Сайт направляет в банк запрос на оплату.

3. Банк возвращает сайту сведения об успешной оплате.

4. Сайт передает новый заказ в 1С.

5. Сайт отображает сообщение об успешном создании заказа.

### Исключение (недоступен банк)
2. Сайту не удалось направить в банк запрос.

3. Сайт отображает ошибку.

### Исключение (нет ответа от банка)
3. Банк не возвращает ответ более 5 минут.

4. Сайт отображает ошибку.

### Исключение (недоступна 1С)
4. Сайту не удалось передать заказ в 1С.

5. Сайт отображает ошибку.

### Альтернативный сценарий А (оплата по СБП)
2. Сайт обращается к СГ для генерации QR кода.

3. **СГ** возвращает сайту QR код.

4. Сайт отображает QR код.

5. Пользователь выполняет оплату по QR коду.

6. Переход на пункт 3 основного алгоритма.

### Исключение (недоступен **СГ**)
2. Сайту не удалось обратиться к **СГ**.

3. Сайт отображает ошибку.

### Исключение (нет ответа от **СГ**)
3. **СГ** не ответил в течении 10 минут.

4. Сайт отображает ошибку.

### Исключение (не поступила оплата)
5. Пользователь не выполнил оплату в течении 30 минут.

6. Сайт отображает ошибку.